async function sendMessageToActiveTab(t){let[e]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0}),a=await chrome.tabs.sendMessage(e.id,t);return a}async function startimport(t,e){let a=chrome.tabs.create({url:"about:blank"}),s=!0;chrome.runtime.onMessage.addListener((t,e,a)=>{"stopimport"===t.type&&(s=!1)}),[a]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0}),console.log(t);for(let i=1;i<t.length&&!0===s;++i){console.log(i),await chrome.tabs.update(a.id,{url:t[i]});await new Promise(t=>{chrome.tabs.onUpdated.addListener(async(s,i)=>{if(s==a.id&&"complete"==i.status){chrome.tabs.sendMessage(a.id,{type:"import",data:{name:e}});let r=new Promise(t=>{chrome.runtime.onMessage.addListener((e,a,s)=>{"finishimport"===e.type&&t()})});await r,t()}})})}chrome.tabs.remove(a.id),!0==s?console.log("Import Successful!"):!1==s&&console.error("Import Stopped")}chrome.tabs.onUpdated.addListener((t,e)=>{}),chrome.runtime.onMessage.addListener((t,e,a)=>{let{type:s,data:i}=t;"startimport"===s&&(startimport(i.arr,i.name),console.log("Starting import"))});